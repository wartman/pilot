<?php
/**
 * Generated by Haxe 4.0.0-rc.3+e3df7a448
 */

namespace todo\ui;

use \php\_Boot\HxAnon;
use \todo\data\VisibleTodos;
use \php\Boot;
use \pilot\_VNode\VNode_Impl_;
use \pilot\StatelessWidget;
use \pilot\VNodeType;

class SiteFooter extends StatelessWidget {
	/**
	 * @var object
	 */
	public $_pilot_props;

	/**
	 * @param object $props
	 * 
	 * @return void
	 */
	public function __construct ($props) {
		#src/pilot/macro/WidgetBuilder.hx:93: characters 9-31
		$this->_pilot_props = new HxAnon();
		#src/pilot/macro/WidgetBuilder.hx:35: characters 33-65
		$this->_pilot_props->store = $props->store;
	}

	/**
	 * @return object
	 */
	public function build () {
		#example/todo/ui/SiteFooter.hx:14: lines 14-121
		$_gthis = $this;
		#example/todo/ui/SiteFooter.hx:43: lines 43-48
		$children = \Array_hx::wrap([$this->remaining()]);
		$children1 = VNode_Impl_::_new(new HxAnon([
			"name" => "span",
			"props" => new HxAnon(["className" => "todo-YViWV"]),
			"children" => ($children !== null ? $children : new \Array_hx()),
		]));
		#example/todo/ui/SiteFooter.hx:85: characters 24-81
		$props = ($this->_pilot_props->store->filter === VisibleTodos::VisibleAll() ? "filter selected" : "filter");
		#example/todo/ui/SiteFooter.hx:83: lines 83-89
		$children2 = \Array_hx::wrap([VNode_Impl_::_new(new HxAnon([
			"name" => "All",
			"props" => new HxAnon(),
			"type" => VNodeType::VNodeText(),
		]))]);
		#example/todo/ui/SiteFooter.hx:82: lines 82-90
		$children3 = \Array_hx::wrap([VNode_Impl_::_new(new HxAnon([
			"name" => "a",
			"props" => new HxAnon([
				"href" => "#all",
				"className" => $props,
			]),
			"children" => ($children2 !== null ? $children2 : new \Array_hx()),
		]))]);
		$children4 = VNode_Impl_::_new(new HxAnon([
			"name" => "li",
			"props" => new HxAnon(),
			"children" => ($children3 !== null ? $children3 : new \Array_hx()),
		]));
		#example/todo/ui/SiteFooter.hx:94: characters 24-85
		$props1 = ($this->_pilot_props->store->filter === VisibleTodos::VisiblePending() ? "filter selected" : "filter");
		#example/todo/ui/SiteFooter.hx:92: lines 92-98
		$children5 = \Array_hx::wrap([VNode_Impl_::_new(new HxAnon([
			"name" => "Pending",
			"props" => new HxAnon(),
			"type" => VNodeType::VNodeText(),
		]))]);
		#example/todo/ui/SiteFooter.hx:91: lines 91-99
		$children6 = \Array_hx::wrap([VNode_Impl_::_new(new HxAnon([
			"name" => "a",
			"props" => new HxAnon([
				"href" => "#pending",
				"className" => $props1,
			]),
			"children" => ($children5 !== null ? $children5 : new \Array_hx()),
		]))]);
		$children7 = VNode_Impl_::_new(new HxAnon([
			"name" => "li",
			"props" => new HxAnon(),
			"children" => ($children6 !== null ? $children6 : new \Array_hx()),
		]));
		#example/todo/ui/SiteFooter.hx:103: characters 24-87
		$props2 = ($this->_pilot_props->store->filter === VisibleTodos::VisibleCompleted() ? "filter selected" : "filter");
		#example/todo/ui/SiteFooter.hx:101: lines 101-107
		$children8 = \Array_hx::wrap([VNode_Impl_::_new(new HxAnon([
			"name" => "Complete",
			"props" => new HxAnon(),
			"type" => VNodeType::VNodeText(),
		]))]);
		#example/todo/ui/SiteFooter.hx:100: lines 100-108
		$children9 = \Array_hx::wrap([VNode_Impl_::_new(new HxAnon([
			"name" => "a",
			"props" => new HxAnon([
				"href" => "#pending",
				"className" => $props2,
			]),
			"children" => ($children8 !== null ? $children8 : new \Array_hx()),
		]))]);
		#example/todo/ui/SiteFooter.hx:49: lines 49-109
		$children10 = \Array_hx::wrap([
			$children4,
			$children7,
			VNode_Impl_::_new(new HxAnon([
				"name" => "li",
				"props" => new HxAnon(),
				"children" => ($children9 !== null ? $children9 : new \Array_hx()),
			])),
		]);
		$children11 = VNode_Impl_::_new(new HxAnon([
			"name" => "ul",
			"props" => new HxAnon(["className" => "todo-eN8SN"]),
			"children" => ($children10 !== null ? $children10 : new \Array_hx()),
		]));
		#example/todo/ui/SiteFooter.hx:110: lines 110-119
		$props3 = new HxAnon([
			"className" => "todo-yLQlQ",
			"onClick" => function ($e)  use (&$_gthis) {
				#example/todo/ui/SiteFooter.hx:118: characters 23-45
				$_gthis->_pilot_props->store->clearCompleted();
				return;
			},
		]);
		#example/todo/ui/SiteFooter.hx:110: lines 110-119
		$children12 = \Array_hx::wrap([VNode_Impl_::_new(new HxAnon([
			"name" => "Clear completed",
			"props" => new HxAnon(),
			"type" => VNodeType::VNodeText(),
		]))]);
		#example/todo/ui/SiteFooter.hx:15: lines 15-120
		$children13 = \Array_hx::wrap([
			$children1,
			$children11,
			VNode_Impl_::_new(new HxAnon([
				"name" => "button",
				"props" => $props3,
				"children" => ($children12 !== null ? $children12 : new \Array_hx()),
			])),
		]);
		return VNode_Impl_::_new(new HxAnon([
			"name" => "footer",
			"props" => new HxAnon(["className" => "todo-1oJqm"]),
			"children" => ($children13 !== null ? $children13 : new \Array_hx()),
		]));
	}

	/**
	 * @return object
	 */
	public function remaining () {
		#example/todo/ui/SiteFooter.hx:124: characters 19-39
		$_this = $this->_pilot_props->store->todos;
		$result = [];
		$i = 0;
		while ($i < $_this->length) {
			if (!$_this->arr[$i]->complete) {
				$result[] = $_this->arr[$i];
			}
			++$i;
		}
		$_g = \Array_hx::wrap($result)->length;
		if ($_g === 0) {
			#example/todo/ui/SiteFooter.hx:125: characters 7-30
			return VNode_Impl_::_new(new HxAnon([
				"name" => "No items left",
				"props" => new HxAnon(),
				"type" => VNodeType::VNodeText(),
			]));
		} else if ($_g === 1) {
			#example/todo/ui/SiteFooter.hx:126: characters 7-28
			return VNode_Impl_::_new(new HxAnon([
				"name" => "1 item left",
				"props" => new HxAnon(),
				"type" => VNodeType::VNodeText(),
			]));
		} else {
			#example/todo/ui/SiteFooter.hx:127: characters 7-48
			return VNode_Impl_::_new(new HxAnon([
				"name" => "" . ($_g??'null') . " items left",
				"props" => new HxAnon(),
				"type" => VNodeType::VNodeText(),
			]));
		}
	}
}

Boot::registerClass(SiteFooter::class, 'todo.ui.SiteFooter');
